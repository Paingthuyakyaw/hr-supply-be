generator client {
  provider     = "prisma-client"
  output       = "../src/generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

model Department {
  id               Int        @id @default(autoincrement())
  name             String     @unique
  is_active        Boolean
  head_employee_id Int        @unique
  url              String?
  employee_count   Int
  location         String
  annual_budget    String?
  startTime        DateTime   @db.Time(6)
  endTime          DateTime   @db.Time(6)
  working_days     WeekDay[]
  created_at       DateTime   @default(now())
  updated_at       DateTime   @updatedAt
  employees        Employee[]
  positions        Position?
}

model Position {
  id            Int        @id @default(autoincrement())
  name          String     @unique
  is_active     Boolean
  department_id Int        @unique
  avg_salary    Int?
  min_salary    Int?
  max_salary    Int?
  employees     Employee[]
  department    Department @relation(fields: [department_id], references: [id])
}

model Employee {
  id              Int           @id @default(autoincrement())
  full_name       String
  avatar          String?
  code            String        @unique
  email           String?       @unique
  phoneNumber     String?       @unique
  dob             DateTime?
  employment_type EmployeType   @default(FULL_TIME)
  department_id   Int
  position_id     Int
  location        String
  date_joined     DateTime      @default(now())
  updated_at      DateTime      @updatedAt
  department      Department    @relation(fields: [department_id], references: [id])
  position        Position      @relation(fields: [position_id], references: [id])
  documents       ID_Document[]
}

model Image {
  id        Int      @id @default(autoincrement())
  url       String
  fileKey   String?  @unique
  folder    String?
  mimeType  String?
  size      Int?
  createdAt DateTime @default(now())
}

model ID_Document {
  id          Int       @id @default(autoincrement())
  type        IDDocType
  front_url   String?
  back_url    String?
  employee_id Int?
  created_at  DateTime  @default(now())
  updated_at  DateTime  @updatedAt
  employee    Employee? @relation(fields: [employee_id], references: [id])
}

enum WeekDay {
  MON
  TUE
  WED
  THU
  FRI
  SAT
  SUN
}

enum EmployeType {
  PART_TIME
  FULL_TIME
  HYBRID
}

enum EmployeeStatus {
  ACTIVE
  ON_PROBATION
  ON_LEAVE
  SUSPENDED
  RESIGNED
  TERMINATED
  RETIRED
}

enum IDDocType {
  PASSPORT
  DRIVER_LICENSE
  NRC
}
